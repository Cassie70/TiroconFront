<form class="flex flex-col mx-auto mt-10 w-full max-w-xl gap-4 p-4 bg-white rounded-xl shadow" (ngSubmit)="guardar()">
  <h1 class="text-2xl font-bold text-center">Ingresa datos del entrenamiento 🎯</h1>

  <label class="flex flex-col">
    <span class="font-semibold">Fecha:</span>
    <input type="date" [(ngModel)]="entrenamiento.fecha" name="fecha" class="border p-2 rounded" required>
  </label>

  <div class="flex justify-between items-center">
    <h2 class="text-lg font-bold">Distancias</h2>
    <button type="button" class="bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600" (click)="agregarDistancia()">+ Agregar Distancia</button>
  </div>

  @for (distancia of entrenamiento.distancias; track distancia) {
    <div class="border p-3 rounded flex flex-col gap-2 bg-gray-50">
      <div class="flex justify-between items-center">
        <span class="font-semibold">Distancia #{{ entrenamiento.distancias.indexOf(distancia) + 1 }}</span>
        <button type="button" class="text-red-500" (click)="eliminarDistancia(entrenamiento.distancias.indexOf(distancia))">🗑️</button>
      </div>

      <label class="flex flex-col">
        <span class="text-sm">Metros:</span>
        <input type="number" [(ngModel)]="distancia.metros" name="metros{{ entrenamiento.distancias.indexOf(distancia) }}" class="border p-2 rounded" required>
      </label>

      <div class="flex justify-between items-center mt-2">
        <span class="font-semibold">Series</span>
        <button type="button" class="bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600" (click)="agregarSerie(distancia)">+ Agregar Serie</button>
      </div>

      @for (serie of distancia.series; track serie) {
        <div class="border p-2 rounded bg-white">
          <div class="flex justify-between items-center">
            <span class="text-sm font-semibold">Serie #{{ distancia.series.indexOf(serie) + 1 }}</span>
            <button type="button" class="text-red-400" (click)="eliminarSerie(distancia, distancia.series.indexOf(serie))">🗑️</button>
          </div>
          <div class="grid grid-cols-3 gap-2 mt-1">
            <input type="number" [(ngModel)]="serie.flecha1" name="flecha1_{{ distancia.idDistancia }}_{{ serie.idSerie }}" placeholder="Flecha 1" class="border p-1 rounded">
            <input type="number" [(ngModel)]="serie.flecha2" name="flecha2_{{ distancia.idDistancia }}_{{ serie.idSerie }}" placeholder="Flecha 2" class="border p-1 rounded">
            <input type="number" [(ngModel)]="serie.flecha3" name="flecha3_{{ distancia.idDistancia }}_{{ serie.idSerie }}" placeholder="Flecha 3" class="border p-1 rounded">
            <input type="number" [(ngModel)]="serie.flecha4" name="flecha4_{{ distancia.idDistancia }}_{{ serie.idSerie }}" placeholder="Flecha 4" class="border p-1 rounded">
            <input type="number" [(ngModel)]="serie.flecha5" name="flecha5_{{ distancia.idDistancia }}_{{ serie.idSerie }}" placeholder="Flecha 5" class="border p-1 rounded">
            <input type="number" [(ngModel)]="serie.flecha6" name="flecha6_{{ distancia.idDistancia }}_{{ serie.idSerie }}" placeholder="Flecha 6" class="border p-1 rounded">
          </div>
        </div>
      }
    </div>
  }

  <button type="submit" class="bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700 mt-4">Guardar Entrenamiento</button>
</form>
